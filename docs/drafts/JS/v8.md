---
title: v8
date: 2009-09-09 09:09:09
tags: 草稿
---

[v8 是如何执行 js 的？](https://www.zoo.team/article/the-process-of-executing-js-in-v8)

[v8 官网也有说明](https://v8.dev/docs/source-code)

遇到的问题：在克隆 deopt_tools 仓库时，网络特别慢，总是超时，可以切换网络环境试一下（就只能瞎试，没啥别的办法）

终于网络不超时了，但出现了这种报错：

```
fetch-pack: unexpected disconnect while reading sideband packet
fatal: early EOF
fatal: index-pack failed
```

这时不要动，等待 5 分钟左右，他就会继续执行（幸好我没有动）最后会执行成功

用一个给校招生讲的思路去写文章

## 疑问：

### 什么是虚拟机？

js 的虚拟机是 v8，但搜索 js 虚拟机的人应该很少，所以我们看一下 java 虚拟机的解释，之后类推即可，[参考](https://blog.csdn.net/zhangjg_blog/article/details/20380971)

> 虚拟机是一种抽象化的计算机，通过在实际的计算机上仿真模拟各种计算机功能来实现的。Java 虚拟机有自己完善的硬体架构，如处理器、堆栈、寄存器等，还具有相应的指令系统。JVM 屏蔽了与具体操作系统平台相关的信息，使得 Java 程序只需生成在 Java 虚拟机上运行的目标代码（字节码），就可以在多种平台上不加修改地运行。

我理解主要作用是：在不同的操作系统、cpu 架构上都能正确执行你写的代码

### 什么是指令集？

cpu 只能读懂二进制，一些连续的二进制数字代表了指令（比如实现加法啥的），那么非常多的指令放在一起，就叫指令集，不同 cpu 架构的指令集是不同的（比如 a 架构的 cpu 执行加法使用 0101，但 b 架构的 cpu 通用执行加法但指令却是 1100）

### 什么是解释执行、编译执行？

[参考](https://zhuanlan.zhihu.com/p/415844136)

> 1.编译：将源代码一次性转换为机器码的过程（机器码有保存为文件，下次运行的时候直接运行机器码）
>
> 2.解释：将源代逐行转换为机器码并运行的过程（机器码并没有保存下来）
>
> 3.编译执行（编译器）：将一段程序直接翻译成机器码(对于 C/C++这种非跨平台的语言)或者中间码(Java 这种跨平台语言，需要 JVM 再将字节码编译成机器码)。编译执行是直接将所有语句都编译成了机器语言，并且保存成可执行的机器码。执行的时候，是直接进行执行机器语言，不需要再进行解释/编译。
>
> 4.解释执行（解释器）：在执行程序时，再将中间码（例如 Java 的字节码通过 JVM 解释成机器码）一行行的解释成机器码进行执行。这个运行过程是解释一行，执行一行。

编译是我一次性变成机器码，并保存到本地，计算机使用的时候直接用机器码即可

解释是计算机使用的时候，我把代码逐行解释，逐行生成机器码，计算机直接使用即可，不会把机器码保存到本地

编译会比解释快一些

[参考](https://www.cnblogs.com/codehaogg/p/12852609.html)

java 也是 jit 的，他的字节码是 xx.class （记得吗？大学的时候学过）

[Java 即时编译器原理解析及实践](https://tech.meituan.com/2020/10/22/java-jit-practice-in-meituan.html)

[搞懂各种虚拟机、解释器、JIT 和 AOT 编译器](https://blog.csdn.net/zhongyili_sohu/article/details/106555297)

js 的 jit 和 java 的 jit 好像呀
